(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const k=typeof navigator<"u"&&/Mobi|Android|iPhone|iPad|iPod/i.test(navigator.userAgent);function F(e,{messageEl:t,messagePopup:n}){k?(n.textContent=e,n.style.display="block",n.style.animation="fadeInOut 2s",n.addEventListener("animationend",()=>{n.style.display="none",n.style.animation=""},{once:!0})):(t.textContent=e,e?(t.style.visibility="visible",t.style.animation="fadeInOut 2s",t.addEventListener("animationend",()=>{t.style.visibility="hidden",t.style.animation=""},{once:!0})):t.style.visibility="hidden")}function z(e){const t=typeof document<"u"?document.getElementById("ariaLive"):null;t&&(t.textContent=e)}function D(e){const t=localStorage.getItem("darkMode")==="true";document.body.classList.toggle("dark-mode",t),e.textContent=t?"☀️ Light Mode":"🌙 Dark Mode",e.title=t?"Switch to Light Mode":"Switch to Dark Mode"}function O(e){e.style.animation="shake 0.4s",e.addEventListener("animationend",()=>{e.style.animation=""},{once:!0})}function V(){const e=document.getElementById("resetWrapper"),t=document.getElementById("titleBar"),n=document.getElementById("inputArea");window.innerWidth<=600?t.contains(e)||t.insertBefore(e,t.firstChild):n.contains(e)||n.appendChild(e)}function T(e){const t=typeof document<"u"?document.getElementById("guessInput"):null,n=typeof document<"u"?document.getElementById("submitGuess"):null,s=typeof document<"u"?document.getElementById("chatInput"):null;t&&(t.disabled=e),n&&(n.disabled=e),s&&(s.disabled=e)}function Y(e,t,n,s){if(window.innerWidth>900){const i=e.getBoundingClientRect(),o=i.top+window.scrollY,r=i.left+window.scrollX,y=i.right+window.scrollX;t.style.position="absolute",t.style.top=`${o}px`,t.style.left=`${r-t.offsetWidth-60}px`,n.style.position="absolute",n.style.top=`${o}px`,n.style.left=`${y+60}px`,s&&(s.style.position="absolute",s.style.left=`${y+60}px`,s.style.top=`${o+n.offsetHeight+20}px`)}else t.style.position="",t.style.top="",t.style.left="",n.style.position="",n.style.top="",n.style.left="",s&&(s.style.position="",s.style.top="",s.style.left="")}function K(){const e=window.visualViewport?window.visualViewport.height:window.innerHeight,t=e*.01;document.documentElement.style.setProperty("--vh",`${t}px`);const n=document.getElementById("appContainer");n&&(n.style.height=`${e}px`,n.style.minHeight=`${e}px`);const s=document.getElementById("board");if(s){const i=Math.max(1,Math.floor(s.children.length/5));v(i)}else v()}function N(){const e=window.innerWidth;let t="full";if(e<=600)t="light";else if(e<=900)t="medium";else{const n=document.getElementById("boardArea"),s=document.getElementById("historyBox"),i=document.getElementById("definitionBox");if(n&&s&&i){const o=n.getBoundingClientRect(),r=o.left,y=e-o.right,g=60;(r<s.offsetWidth+g||y<i.offsetWidth+g)&&(t="medium")}}document.body.dataset.mode!==t&&(document.body.dataset.mode=t)}function v(e=6){if(typeof window<"u"&&window.boardScalingTests)try{if(window.boardScalingTests.getBoardContainerInfo(e)){const a=window.boardScalingTests.verifyElementsFitInViewport(e);if(a.success&&a.optimalSizing){const{tileSize:f,gap:m,boardWidth:u}=a.optimalSizing,c=document.documentElement;return c.style.setProperty("--tile-size",`${f}px`),c.style.setProperty("--tile-gap",`${m}px`),c.style.setProperty("--board-width",`${u}px`),c.style.setProperty("--ui-scale",`${f/60}`),{tile:f,board:u}}}}catch(l){console.warn("Enhanced scaling failed, falling back to original method:",l)}const t=document.getElementById("boardArea");if(!t)return{tile:0,board:0};const n=document.documentElement,s=getComputedStyle(n),i=parseFloat(s.getPropertyValue("--tile-gap"))||10;let o=parseFloat(s.getPropertyValue("--tile-size"));if(isNaN(o))o=60;else{const l=parseFloat(s.getPropertyValue("--tile-gap"))||0;o<=l+1&&(o=60)}const r=Math.min(60,o);let y=t.clientWidth;const g=()=>{const l=document.getElementById("titleBar"),a=document.getElementById("leaderboard"),f=document.getElementById("inputArea"),m=document.getElementById("keyboard"),u=document.getElementById("lobbyHeader"),c=document.getElementById("message");return{title:l?l.offsetHeight:0,lobby:u?u.offsetHeight:0,leaderboard:a?a.offsetHeight:0,input:f?f.offsetHeight:0,keyboard:m?m.offsetHeight:0,message:c?25:0}},w=l=>{n.style.setProperty("--tile-size",`${l}px`),n.style.setProperty("--ui-scale",`${l/r}`)};let d=r;w(d);for(let l=0;l<5;l++){y=t.clientWidth;const a=g(),f=getComputedStyle(t),m=parseFloat(f.marginTop)+parseFloat(f.marginBottom),u=document.getElementById("keyboard"),c=u?getComputedStyle(u):null,B=c?parseFloat(c.marginTop)+parseFloat(c.marginBottom):0,x=a.title+a.lobby+a.leaderboard+a.input+m+B+a.message;let p=n.clientHeight;!p&&typeof window<"u"&&(p=window.innerHeight),t.parentElement&&t.parentElement.clientHeight&&(p=p?Math.min(t.parentElement.clientHeight,p):t.parentElement.clientHeight);const S=window.innerWidth<=600?20:0,$=Math.max(0,p-a.keyboard-x-20-S),W=Math.max(20,(y-i*4)/5),L=Math.max(20,($-i*(e-1))/e),E=Math.min(r,W,L);if(Math.abs(E-d)<.5){d=Math.max(20,E);break}d=Math.max(20,E),w(d)}w(d);const I=d*5+i*4;if(n.style.setProperty("--board-width",`${I}px`),k&&d<35){const l=document.getElementById("keyboard");l&&(l.style.transform=`scale(${Math.max(.8,d/35)})`,l.style.transformOrigin="center bottom")}else{const l=document.getElementById("keyboard");l&&(l.style.transform="",l.style.transformOrigin="")}return{tile:d,board:I}}function P(e,t){const n=t.getBoundingClientRect(),s=e.offsetWidth,i=e.offsetHeight;let o=n.right+10+window.scrollX;window.innerWidth-n.right<s+10&&(n.left>=s+10?o=n.left-s-10+window.scrollX:o=Math.max(10+window.scrollX,window.innerWidth-s-10));let r=n.top+window.scrollY;n.bottom+i>window.scrollY+window.innerHeight-10&&(r=window.scrollY+window.innerHeight-i-10),r=Math.max(r,window.scrollY+10),e.style.position="absolute",e.style.left=`${o}px`,e.style.top=`${r}px`}let h=null,b=null;function M(e){return Array.from(e.querySelectorAll('a[href], button:not([disabled]), input, select, textarea, [tabindex]:not([tabindex="-1"])'))}function A(e){const t=M(e);let n=t[0],s=t[t.length-1];n||(e.setAttribute("tabindex","-1"),n=s=e);const i=o=>{if(o.key==="Tab"){if(t.length===0){o.preventDefault();return}o.shiftKey&&document.activeElement===n?(o.preventDefault(),s.focus()):!o.shiftKey&&document.activeElement===s&&(o.preventDefault(),n.focus())}else o.key==="Escape"&&H(e)};return e.addEventListener("keydown",i),n.focus(),i}function C(e){h=document.activeElement,b=A(e)}function H(e){e.style.display="none",b&&(e.removeEventListener("keydown",b),b=null),h&&typeof h.focus=="function"&&h.focus()}function R(e){e&&e.addEventListener("click",t=>{t.target===e&&H(e)})}function X(e){const t=M(e);t.length?t[0].focus():(e.setAttribute("tabindex","-1"),e.focus())}function j(e,t){e.style.display="block",P(e,t),C(e)}function q(){const e=document.getElementById("keyboard");if(e)if(window.visualViewport){const t=Math.max(0,window.innerHeight-window.visualViewport.height);e.style.transform=`translateY(-${t}px)`}else e.style.transform=""}export{z as a,j as b,H as c,D as d,R as e,X as f,N as g,v as h,k as i,q as j,T as k,O as l,C as o,Y as p,V as r,F as s,K as u};
